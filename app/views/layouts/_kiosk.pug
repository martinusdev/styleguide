include ./../mixins/icon
//- -----------------------------------------------
//- VARIABLES AND DATA

mixin kioskFeatured
  block
  .row.mb-none
    - for (var i = 0; i<2; i++)
      .col--m-6
        .bar.align-items-top.mb-none
          .bar__item.bar__item--shrinkable
            .thumbnail.thumbnail--book.thumbnail--large(data-toggle="#product-preview")
              .thumbnail__img-wrap
                a(href="kiosk-detail.html")
                  img.img.img--fluid.mb-medium(src=`${assetsPrefix}images/content/books/sample-14.jpg`, alt="Základy rybolovu pro kluky a holky - Frank Weissert, Jack Thorne a John Tiffany")
          .bar__item.bar__item--fill
            .h2.mb-tiny
              a.link.link--product.text-bold(href="kiosk-detail.html") Stopárov sprievodca po galaxii
            ul.list-inline.list-inline--delimited.product-detail__author.mb-small.text-semibold
              li Douglas Adams
            .card.card--speech-bubble.mb-medium.bg-secondary
              .card__content.text-medium Vychutnajte si daľšiu várku úžasných a zdravých receptov Elly Woodwardovej spolu s rodinou a priatelmi bez ohladu na to, pri akej príležitosti sa zišli.
            .bar.bar--small
              .bar__item
                .portrait.portrait--small(style="background-image: url('https://www.martinus.sk/data/autori/img/a1666.jpg');")
              .bar__item.line-small
                span.text-semibold.text-medium Callie Krueger
                .text-small Kníhkupec
              .bar__item
                .rating-star.bar__item.align-items-center.no-mrg
                  each star, starIndex in Array(5)
                    +icon('star').rating-star__item.icon--large.is-active

- const assetsPrefix = '';
- const htmlPostfix = '.html';
- const xmas = false;

//- -----------------------------------------------
//- OPTIONS

block opts

//- -----------------------------------------------
//- HTML

doctype html
html.no-js

  //- -----------------------------------------------
  //- HEAD

  head
    meta(http-equiv='Content-Type', content='text/html; charset=utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge, chrome=1')
    meta(name="viewport", content="width=device-width, initial-scale=1.0, user-scalable=yes")

    title= pageTitle

    meta(name='author', content='Lighting Beetle s.r.o.')
    meta(name="description", content="")
    meta(name='keywords', content='')
    link(rel="shortcut icon", href=`${assetsPrefix}favicon.ico`)
    meta(name="theme-color", content=project.theme)

    meta(name='verify-v1', content='T+OHlS5UzwUGqeLzY9VCoZi05W1LWAjmytPCIQ2f3kw=')

    link(rel="stylesheet", href=`${assetsPrefix}fonts/Tabac-Sans/style.css`)

    link(rel="stylesheet", href=`${assetsPrefix}styles/main.css`)

    script(src=`${assetsPrefix}scripts/plugins/modernizr.js`)

    block head

  //- -----------------------------------------------
  //- BODY

  body(class=`${pageClass}` + `${headerWarning}`)

    #page-container

      header.header
        .header__wrapper(data-sticky)
          .wrapper-main
            .bar.header__bar
              if backButton
                .bar__item.bar__item--shrinkable
                  a(href="kiosk-homepage.html").btn.btn--ghost-inverse
                    +icon('chevron-left').icon--medium
                    | Späť
              else
                .bar__item.header__logo
                  a(href="#", class=bookClassHide)
                    img(src=`${assetsPrefix}images/content/logo.svg`, alt="Martinus").show-l
                    img(src=`${assetsPrefix}images/content/logo-small.svg`, alt="Martinus").hide-l
                  if bookHeader
                    a(href="#").book-detail-show
                      img(src=`${assetsPrefix}images/content/logo-small.svg`, alt="Martinus")

              .bar__item.bar__item--fill.header__search(style="max-width: 100%; flex: 1;")
                .header-search__search(style="max-width: 100%; display: flex;")
                  form#search-form.form-control.form-control--input.no-mrg-bottom
                    .input-addons
                      input.input.input--dark#search-in-header(type='text', placeholder="Hľadáte knihu? Ťuknite a začnite písať...", data-input, data-toggle-focus, autocomplete="off")
                      .input-addons__item.header-search__empty.input-addons__item--dark
                        +icon('search', '', 'Search').icon--medium
                      .input-addons__item.input-addons__item.no-pad.header-search__value
                        button.btn.btn--primary.text-nowrap
                          +icon('search', '', 'Search').icon--medium.icon--left
                          | Hladať

      block content

      footer.footer
        .wrapper-main
          section.row.align-items-middle.mb-medium
            .col--l-7
              .bar.bar--small.mb-medium.footer__copy.align-items-middle
                .bar__item
                  img(src=`${assetsPrefix}images/content/logo-small.svg`, alt="Martinus")
                .bar__item.bar__item--fill &copy; 2000-2019 Martinus. Všetky práva vyhradené.
            .col--l-5.text-right

      block modals

        #search-modal.hide.bg-black(style="position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1300; padding-top: 80px;")
          button#search-modal-close.btn.btn--clean(style="position: absolute; right: 10px; top: 80px;").text-color-white
            | zatvoriť
            +icon('close').icon--medium.icon--right
          section.section
            div(style="width: 100%; overflow-x: scroll; overflow-y: hidden; -webkit-overflow-scrolling: touch; white-space: nowrap;")
              .wrapper-main.mb-medium
                //.row
                  .col--8.ofst--2.text-color-grey-light.text-center
                    +icon('search').icon--xlarge.mb-medium
                    p Nebol nájdený žiadny titul vyhovujúci zadaným podmienkam.
                      br
                      | Skúste prosím zmeniť vyhľadávaný výraz.
                each item, index in [...books, ...books]
                  .inline-block(style="width: 120px;")
                    +product().mb-small
                      +productCover({cover: item.cover, size: 'medium-large', href: 'kiosk-detail.html'}).inline-block
                      .product__title
                        p.text-semibold.no-mrg.text-ellipsis.text-size-medium.link--product
                          a.link.link--product(href='kiosk-detail.html')= item.title
                          ul.list-inline.list-inline--delimited.text-size-small.text-ellipsis.text-color-grey-light.mb-tiny
                            - const authors = item.author.split(', ')
                            each item, i in authors
                              li.no-mrg= item
                          if index == 3
                            .badge(style="background: transparent; color: #828282; border-color: #828282;") Nemáme
                          else
                            .badge.badge--green(style="background: transparent;") Máme

      block tooltips

      .alert-container(data-alert-area)

    //- -----------------------------------------------
    //- SCRIPTS
    script.
      window.myApp = window.myApp || {};
      window.myApp.selectLanguage = 'sk';
    script(src=`${assetsPrefix}scripts/vendor.js`)
    script(src=`${assetsPrefix}scripts/main.js`)

    block scripts
      script.

        function showSearch() {
          document.querySelector('#search-modal').classList.remove('hide');
          window.myApp.Modal.lockBody();
        }

        function hideSearch() {
          document.querySelector('#search-modal').classList.add('hide');
          window.myApp.Modal.unlockBody();
        }

        document.addEventListener('myAppLoaded', function() {

          let search = document.querySelector('#search-form');

          search.addEventListener('click', function (e) {
            showSearch();
          });

          search.addEventListener('keydown', function (e) {
            showSearch();
          });

          search.addEventListener('submit', function (e) {
            e.preventDefault();
            window.location.href = 'kiosk-detail.html';
          });

          document.querySelector('#search-modal-close').addEventListener('click', function(){
            hideSearch();
          });

        });
