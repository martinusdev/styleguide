extends layouts/_default

include ./mixins/breadcrumbs
include ./mixins/icon

block opts
    - var pageTitle = 'Knižná odysea'
    - var campaignHeader = true
    - var pageClass = 'ko-page'

block content
  main

    section.section.ko-header.text-color-white
      .wrapper-main
        .row.align-items-top.mb-none
          .col--m-3.mb-medium.mb-m-none.text-center
            a.show-m
              img(src="images/content/campaign/knizna-odysea/logo-sk.svg", width="270")
            a.hide-m
              img(src="images/content/campaign/knizna-odysea/logo-horizontal-sk.svg", width="270")
          .col--m-5.col--l-6.mb-medium.mb-m-none.text-center.text-left-m
            h1.h2.mb-small Lorem ipsum dolor sit amet
            .show-m
              p.mb-none Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mollis arcu a vulputate tincidunt. Vivamus nisl arcu, accumsan eu imperdiet nec, ornare eget felis. Vivamus quis dui ac arcu euismod suscipit sit amet sed augue bla bla
                a(href="#", data-toggle="#rules").link.ko-link--green #{' '}kompletné pravidlá.
            .hide-m
              p.mb-none#ko-description(data-collapse="70") Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mollis arcu a vulputate tincidunt. Vivamus nisl arcu, accumsan eu imperdiet nec, ornare eget felis. Vivamus quis dui ac arcu euismod suscipit sit amet sed augue bla bla
                a(href="#", data-toggle="#rules").link.ko-link--green #{' '}kompletné pravidlá.
              a.link.ko-link--green.text-size-medium(href="javascript:void(0)", data-toggle="#ko-description, self", data-toggle-icon="icons_/app.svg#icon-arrow-up", data-toggle-text="Čítaj menej", data-collapse-trigger) <span data-toggle-text-target>Čítaj viac</span>#{' '}
                +icon('arrow-down')
          .col--m-4.col--l-3.mb-m-none

            .text-center.text-right-m.hide
              .btn.btn--primary.btn--medium.mb-small(data-toggle="#login")
                +icon('user').icon--small.icon--left
                | Prihlásiť do súťaže

            .ko-user
              .bar.bar--vertical
                .bar__item.border-bottom-grey.ko-border--violet.no-mrg-bottom
                  .bar
                    .bar__item.bar__item--shrinkable.text-ellipsis.ko-user__email.no-mrg-bottom
                      +icon('user').icon--medium.text-space-right
                      span.text-semibold klco.roman@gmail.com
                    .bar__item.bar__item--fill.text-right.no-mrg-bottom
                      a(href="#").link.link--product
                        +icon('logout').icon--medium
                .mb-medium
                  +icon('edit').icon--small
                  | #{' '}
                  a.link.ko-link--green.text-small Nastavenia notifikácií e-mailom
                .bar__item.text-center.text-left-m
                  | Môžeš vyhrať:#{' '}
                  b.text-bold.ko-text-color-green.h2 12
                  b #{' '}zo 128 kníh
                  .text-small
                    a.link.ko-link--green Zdvojnásob svoju výhru nákupom v Martinus.sk!

        -
          var swiperConfig = {
          id: 'timeline',
          slidesPerView: 'auto',
          slidesPerGroup: 1,
          centeredSlides: false,
          slideToClickedSide: true,
          loop: false,
          spaceBetween: 10,
          /*breakpoints: {
            768: {
                slidesPerView: 10,
                simulateTouch: true,
              },
            },*/
          };
          swiperConfig = JSON.stringify(swiperConfig);
        .swiper-container(data-swiper-options=swiperConfig).ko-timeline
          .swiper-wrapper
            each item, i in Array(31)
              .swiper-slide.ko-timeline-item.ko-text-color-violet.clickable(
                data-tooltip,
                title=(i > 10) ? 'neaktívne' : '2 z 3',
                data-tippy-placement="bottom",
                data-id=`${i}`,
                class=(i < 5) ? 'is-complete' : '',
                class=(i > 10) ? 'is-disabled' : '')
                .text-center
                  .text-small
                    | #{i+1}.3.
                  +icon('hex').icon--medium

    section.ko-planets
      a(href="#").ko-planets-bonus.clickable
        .ko-planets-bonus__txt.text-center
          h2.h3.text-color-white.mb-none Psst!
          .text-color-white.text-small Tajný bonus

      .ko-knihonaut-button
        .btn.btn--clean.text-color-white#knihonaut-open
          +icon('knihonaut')
        .pill 1
      -
        var swiperConfig = {
          id: 'planets',
          slidesPerView: 'auto',
          slidesPerGroup: 1,
          spaceBetween: 20,
          centeredSlides: true,
          loop: false,
          slideToClickedSlide: false,
        };
        swiperConfig = JSON.stringify(swiperConfig);
      .carousel.carousel--fade-inactive.carousel--disable-inactive
        .swiper-container(data-swiper-options=swiperConfig)
          .swiper-wrapper
            each item, i in Array(31)
              -
                var num = i < 10 ? i : '00';
              .swiper-slide.ko-planets-item
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/planets/${num}.png`).ko-planets-item__image
                .ko-planets-item__content.text-center
                  if (i < 10)
                    .text-color-white
                      .h5.mb-none.text-color-white.text-size-regular dnes: pantomíma
                      .h2.mb-small.text-transform-upper beta malej medvedice
                      .btn.btn--primary.btn--large.mb-small(data-toggle="#challenge")
                        +icon('play').icon--medium.icon--left
                        | Otvoriť výzvu
                  else
                    .badge.badge--violet Výzva sa odomkne #{i+1}.3.



          button.carousel__btn.carousel__btn--prev.ko-planets__btn.clickable
            +icon('arrow-left')
          button.carousel__btn.carousel__btn--next.ko-planets__btn.clickable
            +icon('arrow-right')

    //-#knihonaut.ko-knihonaut
      .bar
        .bar__item
          #knihonaut-scene.ko-knihonaut__scene
        .bar__item.bar__item--fill
          .card.card--arrowhead.card--arrowhead-left
            .card__content
              .bar
                .bar__item.bar__item--fill
                  h3.h3.mb-none Ahoj, som Knihonaut
                .bar__item.bar__item--shrinkable
                  .btn.btn--small.clickable.btn--clean#knihonaut-close
                    +icon('close').icon--small
              p.text-size-medium Budem ťa sprevádzať knižnou galaxiou a pomôžem ti objaviť skryté tajomstvá knižných planét. Ak ti niečo nebude jasné, klikni na mňa a pomôžem ti.

  .modal-overlay#login(data-modal)
    article.modal
      .modal__wrap
        .modal__header
          .modal__header__headline
            h2 Prihlásenie
          .modal__header__action
            .btn.btn--clean(data-toggle="#login")
              +icon('close').icon--medium
        .modal__content
          form
            .form-control.form-control--input
              .input-addons
                input.input(type="text", placeholder="Tvoj e-mail...")
                .input-addons__item.no-pad
                  button.btn.btn--primary
                    | Prihlásiť

  .modal-overlay#challenge(data-modal)
    article.modal.modal--medium
      .modal__wrap
        .modal__header.mb-none
          .modal__header__headline.text-center
            .h5 výzva na dnešný deň
            .h2.text-transform-upper pantomíma
          .modal__header__action
            .btn.btn--clean(data-toggle="#challenge")
              +icon('close').icon--medium
        .row.ko-video-background
          .ofst--m-1
          .col--m-10
            .ko-video
              | <iframe width="560" height="315" src="https://www.youtube.com/embed/docIm4sExSk?rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        .modal__content
          .mb-medium
          .row
            .ofst--m-1
            .col--m-10
              h3.h2 Zadaj knihy, ktoré si rozlúštil vo videu
              form.mb-large
                .form-control.form-control--input#input-guess
                  .input-addons
                    input.input(type="text", placeholder="Názov knihy...")
                    .input-addons__item.no-pad
                      .btn.btn--primary#btn-guess
                        | Hľadaj

              .card.card--success
                .card__content
                  .bar.mb-none
                    .bar__item
                      +icon('check-circle').icon--large.text-color-success
                    .bar__item.bar__item--fill.text-color-success
                      | Gratulujeme! Uhádol si všetky knihy v tejto výzve.
                    .bar__item.bar__item--shrinkable
                      button.btn.btn--small.btn--clean ďalej
                        +icon('arrow-right')

              h3.h3 Uhádnuté knihy
              hr
              .text-center.text-regular.text-color-grey
                | Zatiaľ si neuhádol žiadne knihy

              each i in Array(3)
                .product.product--horizontal.mb-small
                  .product__cover
                    .thumbnail.thumbnail--book.thumbnail--small
                      a(href=`#`)
                        .thumbnail__img-wrap
                          img(src=`${assetsPrefix}images/content/books/sample-1.jpg`).img
                  .product__caption
                    .product__title
                      a.link.link--product Hobbit
                      ul.text-size-small.text-color-grey.no-mrg.text-ellipsis.list-inline.list-inline--delimited
                        li.no-mrg J.R.R. Tolkien

        .modal__footer

  .modal-overlay#rules(data-modal)
    article.modal.modal--full
      .modal__wrap
        .modal__header
          .modal__header__headline.text-center
            .h2.text-transform-upper pravidlá
          .modal__header__action
            .btn.btn--clean(data-toggle="#rules")
              +icon('close').icon--medium
        .modal__content
          .row
            .ofst--m-2
            .col--m-8

              h2.mb-small Vítej, knihonautko, vítej, knihonaute!
              h3.h4 Přečti si návod, jak hrát Knižní odyseu, ať se mezi knižními světy a planetkami neztratíš!

              hr

              h3.h2 Jak hrát?

              .row
                .col--m-8.mb-large
                  ol.list--default.list--expanded.list--no-offset
                    li
                      b Planetek, na kterých na tebe čeká záludný úkol, je celkem 30.
                      | Každý den od 1. do 30. března se odemkne jedna z nich a umožní ti plnit úkol, který ukrývá.
                    li
                      b Celkem se musíš vypořádat se třemi druhy úkolů.
                      | S pantomimou, s kreslením a se slovním popisem. Všemi těmito způsoby jsme - s pomocí spisovatelek, herců a dalších osobností - ztvárnili knížky, které musíš uhodnout.
                    li
                      b U každého úkolu - videa uvidíš, kolik knih se v něm ukrývá a kolik musíš uhodout, abys úkol splnil/a.
                    li
                      b Pod videem najdeš políčko pro vyplnění názvu uhodnutých knih.
                      | Máš neomezený počet pokusů, takže pokud si myslíš, že znáš správnou odpověď, neváhej a zadej ji do příslušného políčka a klikni na “Odeslat”! Hned se dozvíš, jestli je tvá odpověď skutečně správná.
                    li
                      b Zapojit se můžeš kdykoli od 1. do 31. března.
                .col--m-4.mb-large
                  img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/content/moon.png`).img
                  .text-medium.text-center
                    i mesiac knihy :-)

              .mb-large.show-m
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/content/scene.png`).img

              h3.h2 Co můžeš vyhrát?

              p Za každý splněný úkol se ti připočtou 3 knihy, kolik knih aktuálně můžeš vyhrát uvidíš nahoře na stránce.
                br
                | Po skončení soutěže vylosujeme jednoho výherce či výherkyni, který/á vyhraje knihy podle toho, kolik splnil/a úkolů.#{' '}
                b Pokud v březnu nakoupíš v Martinusu, tvoji výhru v případě, že tě vylosujeme, ještě zdvojnásobíme! Vyhrát tedy můžeš až 180 knih.

              p To ale není všechno, těšit se můžeš i na Tajné bonusy, které se na stránce budou objevovat a umožní ti vyhrát další knihomolské ceny. Sleduj proto pozorně tuto stránku!

              p Tvým průvodcem knižním vesmírem je zkušený Knihonaut. Objeví se vždycky, když je potřeba dozvědět se něco důležitého o hře nebo nějakou tu zajímavost z knižního světa. Tak si nenech ujít žádnou novinku, kterou ti přinese!

              p
                b Držíme palce!

              p Chceš si přečíst detailní pravidla soutěže?#{' '}
                a.link Klikni sem.

  .modal-overlay#about(data-modal)
    article.modal.modal--full
      .modal__wrap
        .modal__header
          .modal__header__headline.text-center
            .h2.text-transform-upper knihonaut
          .modal__header__action
            .btn.btn--clean(data-toggle="#about")
              +icon('close').icon--medium

        .modal__content
          .row
            .ofst--m-2
            .col--m-8

              h2 Ahoj, já jsem Knihonaut!

              p.mb-large Zajímá tě, kdo jsem a jak jsem se ocitl uprostřed knižního vesmíru? Čti a hned se to dozvíš. A třeba se pak také vydáš na cestu literárními světy!

              .mb-large
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/knihonaut/k01.jpg`).img.img--rounded

              p.mb-large Když jsem byl ještě docela malý, tak malý, že bych ze svého skafandru klidně mohl vylézt rukávem, objevil jsem knížky. Každá byla jako úplně nový svět! Bavilo mě tyhle světy poznávat a objevovat. Ale ty v knihovničce jsem prozkoumal docela rychle a zatoužil jsem poznat další.

              .mb-large
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/knihonaut/k02.jpg`).img.img--rounded

              p.mb-large A tak jsem se rozhodl vydat se dál než jen na nejvyšší polici knihovny ve svém pokoji. Tušil jsem, že na mě čeká ještě spousta nových světů. Jiných krajin, osudů a realit. Chtěl jsem je všechny poznat a pochopit. Rozletěl jsem se proto na dlouhou cestu se spoustou úžasných mezipřistání. Stal jsem se Knihonautem.

              .mb-large
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/knihonaut/k03.jpg`).img.img--rounded

              p.mb-large Taková vesmírná cesta je samozřejmě plná nástrah, nebezpečenství a složitých úkolů, které prověří odhodlání každého knihonauta a knihonautky. Průzkumníci a průzkumnice nových knižních světů totiž musí mít spoustu odvahy a taky musí mít pod přilbou, jak se říká ve vesmíru. Když ale poletíš se mnou a úkolů, které pro tebe knižní vesmír přichystal, se nelekneš, odměna bude stát za to!

              .mb-large
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/knihonaut/k04.jpg`).img.img--rounded

        .modal__content

block scripts
  script(src=`${assetsPrefix}scripts/knizna-odysea.js`)
  script
    .
      window.addEventListener('DOMContentLoaded', () => {
        window.myApp.koTimeline.set(5);

        const title = 'Ahoj, som Knihonaut';
        const icon = '<svg class="icon icon-close icon--small" role="img" aria-hidden="true"><use xlink:href="icons_/app.svg#icon-close"></use></svg>';
        const content =
        '<p class="text-size-medium">Budem ťa sprevádzať knižnou galaxiou a pomôžem ti objaviť skryté tajomstvá knižných planét. Ak ti niečo nebude jasné, klikni na mňa a pomôžem ti. <a class="link ko-link--green" href="#about" data-toggle="#about">viac o mne</a></p>';

        document.getElementById('knihonaut-open').addEventListener('click', e => {
          window.myApp.koKnihonaut.show({ title, content, icon });
          window.myApp.toggles.update();
        });

        document.getElementById('btn-guess').addEventListener('click', e => {
          e.preventDefault();
          const input = document.getElementById('input-guess');
          input.classList.add('animation-shake');
          input.querySelector('input').classList.add('is-error');
          setTimeout(() => {
            input.classList.remove('animation-shake');
          }, 1000);
        });

      });
