extends layouts/_default

include ./mixins/breadcrumbs
include ./mixins/icon

block opts
    - var pageTitle = 'Knižná odysea'
    - var campaignHeader = true
    - var pageClass = 'ko-page'

block content
  main

    section.section.ko-header.text-color-white
      .wrapper-main
        .row.align-items-top.mb-none
          .col--m-3.mb-medium.mb-none-m.text-center#knihonaut-open
            a.show-m
              img(src="images/content/campaign/knizna-odysea/logo-sk.svg", width="270")
            a.hide-m
              img(src="images/content/campaign/knizna-odysea/logo-horizontal-sk.svg", width="270")
          .col--m-5.col--l-6.mb-medium.mb-none-m.text-center.text-left-m
            h1.h2.mb-small Lorem ipsum dolor sit amet
            .show-m
              p.mb-none Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mollis arcu a vulputate tincidunt. Vivamus nisl arcu, accumsan eu imperdiet nec, ornare eget felis. Vivamus quis dui ac arcu euismod suscipit sit amet sed augue bla bla
                a(href="#").link.ko-link--green #{' '}kompletné pravidlá.
            .hide-m
              p.mb-none#ko-description(data-collapse="70") Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mollis arcu a vulputate tincidunt. Vivamus nisl arcu, accumsan eu imperdiet nec, ornare eget felis. Vivamus quis dui ac arcu euismod suscipit sit amet sed augue bla bla
                a(href="#").link.ko-link--green #{' '}kompletné pravidlá.
              a.link.ko-link--green.text-size-medium(href="javascript:void(0)", data-toggle="#ko-description, self", data-toggle-icon="icons_/app.svg#icon-arrow-up", data-toggle-text="Čítaj menej", data-collapse-trigger) <span data-toggle-text-target>Čítaj viac</span>#{' '}
                +icon('arrow-down')
          .col--m-4.col--l-3.mb-none-m
            .ko-user
              .bar.bar--vertical
                .bar__item.border-bottom-grey.ko-border--violet
                  .bar
                    .bar__item.bar__item--shrinkable.text-ellipsis.ko-user__email
                      +icon('user').icon--medium.text-space-right
                      span.text-semibold klco.roman@gmail.com
                    .bar__item.bar__item--fill.text-right
                      a(href="#").link.link--product
                        +icon('logout').icon--medium
                .bar__item.text-center.text-left-m
                  | Môžeš vyhrať:#{' '}
                  b.text-bold.ko-text-color-green.h2 12
                  b #{' '}zo 128 kníh
                  .text-small
                    a.link.ko-link--green Zdvojnásob svoju výhru nákupom v Martinus.sk!

        -
          var swiperConfig = {
          id: 'timeline',
          slidesPerView: 'auto',
          slidesPerGroup: 1,
          centeredSlides: false,
          slideToClickedSide: true,
          loop: false,
          spaceBetween: 10,
          /*breakpoints: {
            768: {
                slidesPerView: 10,
                simulateTouch: true,
              },
            },*/
          };
          swiperConfig = JSON.stringify(swiperConfig);
        .swiper-container(data-swiper-options=swiperConfig).ko-timeline
          .swiper-wrapper
            each item, i in Array(31)
              .swiper-slide.ko-timeline-item.ko-text-color-violet.clickable(data-tooltip, title="2 z 3", data-position="bottom", data-id=`${i}`)
                .text-center
                  .text-small
                    | #{i+1}.3.
                  +icon('hex').icon--medium

    section.ko-planets
      -
        var swiperConfig = {
        id: 'planets',
        nextButton: '.carousel__btn--next',
        prevButton: '.carousel__btn--prev',
        slidesPerView: 'auto',
        slidesPerGroup: 1,
        spaceBetween: 20,
        centeredSlides: true,
        loop: false,
        slideToClickedSlide: false,
        };
        swiperConfig = JSON.stringify(swiperConfig);
      .carousel.carousel--fade-inactive.carousel--disable-inactive
        .swiper-container(data-swiper-options=swiperConfig)
          .swiper-wrapper
            each item, i in Array(31)
              .swiper-slide.ko-planets-item
                img(src=`${assetsPrefix}images/content/campaign/knizna-odysea/planets/07-dune@2x.png`).ko-planets-item__image
                .ko-planets-item__content.text-center
                  .text-color-white
                    .h5.mb-none.text-color-white.text-size-regular výzva pre tento deň
                    .h2.mb-small.text-transform-upper pantomíma
                  .btn.btn--primary.btn--large.mb-small(data-toggle="#challenge")
                    +icon('play').icon--medium.icon--left
                    | Otvoriť výzvu



          button.carousel__btn.carousel__btn--prev.ko-planets__btn.clickable
            +icon('arrow-left')
          button.carousel__btn.carousel__btn--next.ko-planets__btn.clickable
            +icon('arrow-right')

    #knihonaut.ko-knihonaut
      .bar
        .bar__item
          #knihonaut-scene.ko-knihonaut__scene
        .bar__item.bar__item--fill
          .card.card--arrowhead.card--arrowhead-left
            .card__content
              .bar
                .bar__item.bar__item--fill
                  h3.h3.mb-none Ahoj, som Knihonaut
                .bar__item.bar__item--shrinkable
                  .btn.btn--small.clickable.btn--clean#knihonaut-close
                    +icon('close').icon--small
              p.text-size-medium Budem ťa sprevádzať knižnou galaxiou a pomôžem ti objaviť skryté tajomstvá knižných planét. Ak ti niečo nebude jasné, klikni na mňa a pomôžem ti.

  .modal-overlay#challenge(data-modal)
    article.modal.modal--full
      .modal__wrap
        .modal__header.mb-none
          .modal__header__headline.text-center
            .h5 výzva na dnešný deň
            .h2.text-transform-upper pantomíma
          .modal__header__action
            .btn.btn--clean(data-toggle="#challenge")
              +icon('close').icon--medium
        .row.ko-video-background
          .ofst--m-2
          .col--m-8
            .ko-video
              | <iframe width="560" height="315" src="https://www.youtube.com/embed/docIm4sExSk?rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        .modal__content
          .mb-medium
          .row
            .ofst--m-3
            .col--m-6
              h3.h2 Zadaj knihy, ktoré si rozlúštil vo videu
              form.mb-large
                .form-control.form-control--input#input-guess
                  .input-addons
                    input.input(type="text", placeholder="Názov knihy...")
                    .input-addons__item.no-pad
                      button.btn.btn--primary#btn-guess
                        | Hľadaj

              h3.h3 Uhádnuté knihy
              hr
              .text-center.text-regular.text-color-grey
                | Zatiaľ si neuhádol žiadne knihy

              each i in Array(3)
                .product.product--horizontal.mb-small
                  .product__cover
                    .thumbnail.thumbnail--book.thumbnail--small
                      a(href=`#`)
                        .thumbnail__img-wrap
                          img(src=`${assetsPrefix}images/content/books/sample-1.jpg`).img
                  .product__caption
                    .product__title
                      a.link.link--product Hobbit
                      ul.text-size-small.text-color-grey.no-mrg.text-ellipsis.list-inline.list-inline--delimited
                        li.no-mrg J.R.R. Tolkien

        .modal__footer

block scripts
  script(src=`${assetsPrefix}scripts/knizna-odysea.js`)
  script
    .
      window.addEventListener('DOMContentLoaded', function() {
        window.myApp.koTimeline.set(10);
      });

      document.getElementById('btn-guess').addEventListener('click', e => {
        e.preventDefault();
        const input = document.getElementById('input-guess');
        input.classList.add('animation-shake');
        input.querySelector('input').classList.add('is-error');
        setTimeout(() => {
          input.classList.remove('animation-shake');
        }, 1000);
      });

      document.getElementById('knihonaut-close').addEventListener('click', e => {
        document.getElementById('knihonaut').classList.remove('ko-knihonaut--active');
        window.myApp.koKnihonaut.stop();
      });

      document.getElementById('knihonaut-open').addEventListener('click', e => {
      document.getElementById('knihonaut').classList.add('ko-knihonaut--active');
        window.myApp.koKnihonaut.play();
      });
