extends layouts/_default

include ./mixins/booksCarouselHorizontal
include ./mixins/carouselTiles
include ./mixins/productHorizontal
include ./mixins/sectionHeader

block opts
    - var pageTitle = 'Homepage'

mixin preVas
  section.mb-large
    article.card
      .card__content.card__content--overflow
        +sectionHeader({ header: 'Pre Vás', more: false, center: true })
        +booksCarouselHorizontal

mixin banner(banner)
  section.mb-large
    a(href='#').banner
      img.img.img--fluid(src=`images/content/banners/${banner}.jpg`)

mixin tyzdenneKolekcie
  section.mb-large
    article.card
      .card__content.card__content--overflow
        +sectionHeader({ header: 'Týždenné kolekcie', more: false, center: true, small: true })
        h2.text-center Knihy do vašej kuchyne
        include ./modules/collection-carousel

      .card__content
        .btn-layout.btn-layout--vertical.mb-medium
          button.btn.btn--ghost Celá kolekcia
        .bar.bar--small.align-items-top
          .bar__item
            .portrait.portrait--medium(style="background-image: url('https://www.martinus.sk/data/autori/img/a1666.jpg');")
          .bar__item.bar__item--fill
            p.mb-small Vyberá#{' '}
              a.link(href='#', title="Tomáš Ulej") Tomáš Ulej
            p.no-mrg.text-size-medium Recepty zo života alebo zdravé desiate od Daniely Rau sú to najlepšie, čo môžete v Martinuse ochutnať.

mixin novinky
  section.mb-large
    article.card
      .card__content.card__content--overflow
        +sectionHeader({ header: 'Novinky', more: false, center: true })
        +booksCarouselHorizontal

mixin najoblubenejsieKolekcie
  section.mb-large
    article.card
      .card__status
        .portrait.portrait--small(style="background-image: url('https://www.martinus.sk/data/autori/img/a1666.jpg');")
      .card__content.card__content--overflow
        +sectionHeader({ header: 'Najobľúbenejšie kolekcie', small: true, more: false, center: true })
        h2.text-center Biografie slávnych
        include ./modules/collection-carousel

      .card__content
        .btn-layout.btn-layout--vertical
          button.btn.btn--ghost Celá kolekcia

mixin najpredavaniejsieZPonuky
  section.mb-large
    .card
      .card__content
        +sectionHeader({ header: 'Najpredávanejšie z ponuky', more: false, center: true })
        .btn-layout.btn-layout--vertical.mb-large
          .btn-group.btn-group--horizontal.btn-group--fill(data-tabs-container)
            a(href='#tab-ranking-books', role="tab", data-tabs-item).btn.btn--ghost.is-active Knihy
            a(href='#tab-ranking-movies', role="tab", data-tabs-item).btn.btn--ghost Filmy
            a(href='#tab-ranking-games', role="tab", data-tabs-item).btn.btn--ghost Hry
            a(href='#tab-ranking-coffee-tea', role="tab", data-tabs-item).btn.btn--ghost Káva a čaj

      .card__content
        article.tabs
          each item, index in ['books', 'movies', 'games', 'coffee-tea']
            section.tab(id=`tab-ranking-${item}`, class= index === 0 ? 'is-active' : '')
              ul.list.list--counter.no-pad
                each item, i in [...books, ...books ]
                  if i < 10
                    li.mb-medium(class=i > 4 ? 'show-l' : '')
                      //- +productHorizontal(item).no-mrg
                      +productHorizontal(Object.assign({}, item, { titleClass: 'text-size-regular'})).no-mrg

      .card__content
        .btn-layout.btn-layout--vertical
          button.btn.btn--ghost Celý rebríček

mixin akcioveTituly
  section.mb-large
    .card
      .card__content
        +sectionHeader({ header: 'Akciové tituly', more: false, center: true })
        +productHorizontal({ discountUnderBook: true, discount: 'Ušetrite 3,50 €', description: 'Recepty zo života alebo zdravé desiate od Daniely Rau sú to najlepšie, čo môžete v Martinuse ochutnať.', coverSize: 'large', duration: {} })
      .card__content.card__content--overflow
        +booksCarouselHorizontal({ duration: {} })

mixin ludiNajviacZaujma
  section.mb-large
    .card
      .card__content
        +sectionHeader({ header: 'Ľudí najviac zaujíma', more: false, center: true })
        ul.list.list--unstyled
          each item, i in [...books, ...books ]
            if i < 4
              li(class=`${i < 3 ? 'mb-medium' : ''}`)
                +productHorizontal(Object.assign({}, item, { titleClass: 'text-size-regular'})).no-mrg

mixin najoblubenejsieSerie
  section.mb-large
    article.card
      .card__status
        .portrait.portrait--small(style="background-image: url('https://www.martinus.sk/data/autori/img/a1666.jpg');")
      .card__content.card__content--overflow
        +sectionHeader({ header: 'Najobľúbenejšie série', more: false, center: true, small: true })
        h2.text-center Všetko z IT sveta
        include ./modules/collection-carousel

      .card__content
        .btn-layout.btn-layout--vertical
          button.btn.btn--ghost Celá kolekcia

block content
  main.bg-secondary
    section.section
      include ./modules/carousel-banner

    section.section
      .wrapper-main
        // desktop
        .row.show-l
          .col--l-4.col--m-6
            +preVas
            +banner('Main')
            +tyzdenneKolekcie
            +akcioveTituly

          .col--l-4.col--m-6
            +novinky
            +najoblubenejsieKolekcie
            +ludiNajviacZaujma
            +najoblubenejsieSerie

          .col--l-4.col--m-6
            +najpredavaniejsieZPonuky
            +banner('Square')

        // tablet
        .row.show-m-only
          .col--m-6
            +preVas
            +novinky
            +banner('Main')
            +tyzdenneKolekcie
            +akcioveTituly

          .col--m-6
            +najpredavaniejsieZPonuky
            +najoblubenejsieKolekcie
            +najoblubenejsieSerie
            +ludiNajviacZaujma

        // mobile
        .row.hide-m
          .col--12
            +preVas
            +najpredavaniejsieZPonuky
            +novinky
            +tyzdenneKolekcie
            +banner('Main')
            +najoblubenejsieKolekcie
            +akcioveTituly

        .row
          .col--m-6.col--l-4.ofst--center
            .btn-layout.btn-layout--vertical
              button.btn.btn--ghost Zobraziť viac

    section.section
      h2.text-center.mb-medium Máme pre vás aj
      -
        const tiles = [
          {
            title: 'Blog',
            color: 'yellow'
          },
          {
            title: 'E-knihy',
            color: 'green'
          },
          {
            title: 'Hry',
            color: 'blue'
          },
          {
            title: 'Filmy',
            color: 'violet'
          },
          {
            title: 'Knižné predplatné',
            color: 'red'
          },
          {
            title: 'Káva a čaj',
            color: 'brown'
          },
          {
            title: 'Darčeková poukážka',
            color: 'orange'
          },
        ];
      +carouselTiles(tiles)

    include ./modules/seen-items

    section.bg-default.section.section--overflow
      .wrapper-main
        -
          var swiperFooterContent = [
            {
              icon: 'footer-tradition',
              text: 'Máme skoro 30-ročnú tradíciu predaja kníh'
            },
            {
              icon: 'footer-shipping',
              text: 'Ponúkame vyše 20 000 titulov na sklade'
            },
            {
              icon: 'footer-stores',
              text: '10 kníhkupectiev po celom Slovensku'
            },
            {
              icon: 'footer-mastercard',
              text: 'Sme 3-násobný MasterCard Obchodník roka'
            },
            {
              icon: 'footer-events',
              text: 'Organizujeme desiatky besied s autormi'
            },
            {
              icon: 'footer-reading',
              text: 'Podporujeme čítanie s porozumením'
            },
          ];
          var swiperFooterConfig = {
            nextButton: '.carousel__btn--next',
            prevButton: '.carousel__btn--prev',
            slidesPerView: 'auto',
            slidesPerGroup: 1,
            spaceBetween: 20,
            centeredSlides: true,
            loop: true,
          };
          swiperFooterConfige = JSON.stringify(swiperFooterConfig);
        .carousel.carousel--fade-outside.carousel--fade-outside-white.carousel-cards
          .swiper-container(data-swiper-options=swiperFooterConfig)
            .swiper-wrapper
              each item, i in swiperFooterContent
                .swiper-slide.carousel-cards__item
                  .card.card--well
                    .card__content
                      .bar.no-mrg-bottom
                        .bar__item.bar__item--shrinkable
                          +icon(item.icon, 'text-color-grey')
                        .bar__item.bar__item--fill
                          p.text-medium= item.text

            button.btn.btn--carousel.btn--large.btn--equal.carousel__btn.carousel__btn--prev
              +icon('arrow-left').icon--medium
            button.btn.btn--carousel.btn--large.btn--equal.carousel__btn.carousel__btn--next
              +icon('arrow-right').icon--medium
