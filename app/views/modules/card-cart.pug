include ./../mixins/addTo
include ./../mixins/xmas

mixin addTo2(props = {})
  -
    const {
    text = 'Pridať do',
    icon = 'heart',
    iconClass = '',
    link = false,
    status = true,
    id = Math.floor((Math.random() * 1000)),
    buttonClass = 'btn--clean',
    info = false,
    purchased = false,
    } = props;

  if purchased
    .mb-medium.text-color-grey
      +icon('check-circle').icon--small
      | #{' '}Zakúpené dňa 10.9. 2019
  .btn-dropdown.btn-dropdown--no-icon&attributes(attributes)
    if link
      a.link.text-medium(id=`wishlist-button-${id}`, data-toggle="self, next",  aria-expanded="false", data-toggle-expand)=text
    else
      button.btn.no-mrg(id=`wishlist-button-${id}`, data-toggle="self, next",  aria-expanded="false", data-toggle-expand, class=buttonClass ? buttonClass : "")
        +icon(icon).icon--medium(class=text ? "icon--left" : "", class=iconClass ? iconClass : "")
        | #{text}

    .dropdown.dropdown--arrowhead(id=`wishlist-dropdown-${id}` data-dropdown, data-dropdown-interactive, data-toggle-expand, aria-expanded="false")
      .dropdown__wrap(style="min-width: 150px;")
        div(id=`my-library-dropdown-${id}` data-toggle-class="hide")
          if !status
            .dropdown__item.text-size-small Odložte si knihu do jedného zo zoznamov
          each item, i in ['Wishlist', 'Vianoce', 'Slovenská klasika']
            .dropdown__item
              .checkbox
                input(id=`list-check${i}`, type="checkbox", name=`list-check${i}`).radiocheck__input
                label(for=`list-check${i}`).radiocheck__control
                label(for=`list-check${i}`).radiocheck__label=item
          a(data-toggle=`#my-library-dropdown-${id}, #my-library-dropdown-list-${id}`).dropdown__item.dropdown__item--more Ďalšie zoznamy
          a(data-toggle=`#wishlist-add-item-${id}, #my-library-dropdown-${id}`).dropdown__item
            | Nový zoznam
            +icon('plus').icon--left.icon--medium.text-color-success
          if status
            a(data-toggle=`#my-library-dropdown-${id}, #my-library-dropdown-states-${id}`).dropdown__item.dropdown__item--more Označiť ako
        .hide(id=`my-library-dropdown-list-${id}` data-toggle-class="hide")
          .bar.no-mrg-bottom
            .bar__item.no-mrg-right
              button.btn.btn--clean.btn--small(data-toggle=`#my-library-dropdown-list-${id}, #my-library-dropdown-${id}`)
                +icon('chevron-left', 'icon--medium', 'Naspäť')
            .bar__item.bar__item--fill
              h5.dropdown__group Presunúť do:
            .bar__item
              button.btn.btn--clean.btn--small(data-toggle=`#my-library-dropdown-${id}, #my-library-dropdown-list-${id}`)
                +icon('close', 'icon--small', 'Naspäť')
          a(href="#").dropdown__item Do školy
          a(href="#").dropdown__item Pre brata
        .hide(id=`wishlist-add-item-${id}` data-toggle-class="hide")
          .card.mb-none
            .card__content.card__content--condensed
              .bar.flex-nowrap
                .bar__item.no-mrg-right
                  button.btn.btn--clean.btn--small(data-toggle=`#wishlist-add-item-${id}, #my-library-dropdown-${id}`)
                    +icon('chevron-left', 'icon--medium', 'Naspäť')
                .bar__item.align-self-center.text-center.text-nowrap
                  | Nový zoznam
                .bar__item
                  button.btn.btn--clean.btn--small(data-toggle=`#wishlist-add-item-${id}, #my-library-dropdown-${id}`)
                    +icon('close', 'icon--small', 'Naspäť')
              .form-control.form-control--input
                input(name=`new-wishlist-${id}`, id=`new-wishlist-${id}`, placeholder="napr. otcovi na Vianoce").input
              .btn-layout--vertical
                button(type="button").btn.btn--full.no-mrg-bottom Vytvoriť
        .hide(id=`my-library-dropdown-states-${id}` data-toggle-class="hide")
          .bar.no-mrg-bottom
            .bar__item.no-mrg-right
              button.btn.btn--clean.btn--small(data-toggle=`#my-library-dropdown-states-${id}, #my-library-dropdown-${id}`)
                +icon('chevron-left', 'icon--medium', 'Naspäť')
            .bar__item.bar__item--fill
              h5.dropdown__group Označiť ako:
            .bar__item
              button.btn.btn--clean.btn--small(data-toggle=`#my-library-dropdown-${id}, #my-library-dropdown-states-${id}`)
                +icon('close', 'icon--small', 'Naspäť')
          a(href="#").dropdown__item
            +icon('circle').icon--small.text-color-grey.text-space-right
            b Neprečítané
          a(href="#").dropdown__item
            +icon('time').icon--small.text-color-blue.text-space-right
            | Práve čítam
          a(href="#", data-toggle="#book-read-modal").dropdown__item
            +icon('check-circle').icon--small.text-color-success.text-space-right
            | Prečítaná

  if info
    span Pridané do: #{' '}
      a.link Môj Wishlist
      | #{', '}
      a.link Moje naj
      | #{', '}
      a.link Slovenské fantasy


.price-box
  ul.tab-nav.tab-nav--block.tab-nav--rounded(data-tabs-container)
    li.tab-nav__item.flex-noshrink(data-tabs-item)
      a.tab-nav__content.tab-nav__content--card(href='#web' role="tab")
        span.tab-nav__content-wrap
          span.block.text-ellipsis Na webe
          span.status.status--success.text-color-grey.text-normal.text-ellipsis do 3 dní
    li.tab-nav__item(data-tabs-item)
      a.tab-nav__content.tab-nav__content--card(href='#shop' role="tab")
        span.tab-nav__content-wrap.text-nowrap
          span.block.text-ellipsis Odložiť v kníhkupectve
          span.status.status--success.text-color-grey.text-normal.text-ellipsis Bratislava, Obchodná

  .tabs
    section#web.tab
      article.card.card--well.text-center.text-size-medium

        .card__content
          .row
            .col--6.col--m-12.text-right.text-center-m
              .h1.price-box__price.no-mrg-bottom 12,99 €
            .col--6.col--m-12.text-left.text-center-m
              p.text-color-grey-dark.mb-none.mb-small-m
                span.show-m Bežná cena#{' '}
                span.hide-m Bežne#{' '}
                span.text-strikethrough 15,42 €
              .badges.badges--inline.align-items-center.no-mrg-bottom
                .badge.badge--primary Ušetríte 3,50 €

              .mb-tiny
              .badge.badge--large
                +icon('tip-heart').icon--medium.text-space-right-tiny
                span.text-space-right-tiny alebo
                a.link podporte vydavateľov

        .card__content

          +xmas()

          p.mb-small.text-color-grey-dark Máme na#{' '}
            em(data-tooltip, title="Toto je tooltip vysvetlivka") sklade
            | ,#{' '}posielame#{' '}
            em(data-tooltip, title="Táto kniha sa môže na cestu ku vám vybrať prakticky okamžite! Ak si ju objednáte do 13:00 v pracovný deň, odošleme vám ju ešte dnes, inak najneskôr nasledujúci pracovný deň.") ihneď
            | .
          .btn-layout--vertical

            if (pageTitle == 'Detail knihy')
              button.btn.btn--primary.btn--large.mb-small.is-consent-show-m(data-toggle='#checkout-notice')
                +icon('cart').icon--left.icon--medium
                | Vložiť do košíka
            else if (pageTitle == 'Detail knihy 2')
              button.btn.btn--primary.btn--large.mb-small.is-consent-show-m(data-toggle='#checkout-notice')
                +icon('cart').icon--left.icon--medium
                | Vložiť do košíka
            else
              button.btn.btn--primary.btn--large.mb-small(data-toggle='#checkout-notice')
                +icon('cart').icon--left.icon--medium
                | Vložiť do košíka

            if (pageTitle == 'Detail knihy 2')
              .flex.align-items-middle.is-consent-show-m
                button.btn.btn--success.btn--medium.mb-none.flex-fill.text-space-right-tiny(data-toggle='#quick-checkout')
                  +icon('fwd').icon--left.icon--medium
                  | Zrýchlený nákup
                +icon('info').icon--medium.text-color-grey(data-tooltip, title="S tymto butonom nakupite strasne rychlo, ze si ani nevsimnete")

            +addTo2({info: true, buttonClass: 'btn--ghost', purchased: true})

    section#shop.tab.text-size-medium
      article.card.card--well.text-center

        .card__content
          .h1.price-box__price 13,90 €

        .card__content
          .form-control.form-control--select.align-items-center.no-mrg
            select.store-list-select.select--ghost.select--lowercase(data-select-store, data-select-small)
              option(placeholder, selected, disabled) Vyberte kníhkupectvo

          .mb-tiny
          .mb-small
            +icon('xmas-small').icon--small.text-color-success.text-space-right-tiny
            a(href="#").link Otváracie hodiny počas Vianoc


        .card__content
          .btn-layout--vertical
            button.btn.btn--primary.btn--large.mb-small(data-toggle="#book-reservation") Rezervovať na 48 hod.

            +addTo()
