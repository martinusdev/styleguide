extends layouts/_default

include ./mixins/booksCarouselRecommended
include ./mixins/breadcrumbs
include ./mixins/pagination
include ./mixins/review
include ./mixins/sectionHeader
include ./mixins/icon
include ./mixins/addTo

block opts
    - var pageTitle = 'Detail knihy';
    - var bookHeader = true;
    //- var pageClass = 'is-consent';
    - var gdpr = false;

mixin itemGroup(id)
  div&attributes(attributes)
    h2.h3 Ďalšie formáty tejto knihy
    //+groupItem('Kniha', 0)
    //+groupItem('Kniha, český jazyk', 0)
    +groupItem('E-kniha', 1, 'Vydavatelstvo Publishing, 2019', true)
    +groupItem('Audiokniha mp3', 2, 'Vydavatelstvo Publishing, 2019', true)
    .hide(data-toggle-class="hide", id=`item-group-more${id}`)
      +groupItem('Audiokniha cd', 3, 'Vydavatelstvo Publishing, 2019', true)
    .mb-medium
      //a.link.text-size-medium(href="javascript:void(0)", data-toggle=`#item-group-more${id}, #item-group-more-description${id}, self`, data-toggle-icon="icons_/app.svg#icon-arrow-up", data-toggle-text="Zobraziť menej", data-collapse-trigger, data-parent-hop="2")
        +icon('plus')
        | <span data-toggle-text-target class="text-space-left-tiny text-space-right">Viac formátov</span>
      a.link.text-size-medium(data-toggle="#modal-formats")
        +icon('plus')
        | Zobraziť viac#{' '}
      span.text-color-grey.text-size-small(id=`item-group-more-description${id}`, data-toggle-class="hide") (audiokniha mp3, audiokniha cd)

mixin groupItem(name, id, details, inline)
  .bar.align-items-middle.mb-medium(class=(id !== 3) ? 'border-bottom-grey' : '')
    .bar__item.bar__item--fill.mb-small-m.no-mrg-top.no-mrg-horizontal--m-down
      .bar.bar--vertical.bar--vertical-small.mb-small.mb-none-m
        .bar__item.no-mrg
          a.text-semibold.text-medium.inline-block.link=name
          | #{' '}
          span.text-medium.text-color-grey(class=inline ? 'show-m' : '')=details
          //a.link.link--product Základy rybolovu pro kluky a holky
          .inline-block.text-size-small(class=inline ? 'hide-m' : 'hide')
            if id == 0
              span.text-color-success.text-space-right-tiny Na sklade
              span.text-color-blue Novinka
            else if id == 1
              span.text-color-success.text-space-right-tiny PDF
              span.text-color-success.text-space-right-tiny EPUB
              span.text-color-success MOBI
            else if id == 3
              span.text-color-success Na sklade
        .bar__item(class=inline ? 'show-m' : '')
            if id == 0
              .badge.badge--green.mb-small.mb-none-m Na sklade
              .badge.badge--blue.mb-small.mb-none-m Novinka
            else if id == 1
              .badge.badge--green.mb-small.mb-none-m PDF
              .badge.badge--green.mb-small.mb-none-m EPUB
              .badge.badge--green.mb-small.mb-none-m MOBI
            else if id == 2
              .badge.badge--green.mb-small.mb-none-m MP3 na stiahnutie
            else if id == 3
              .badge.badge--green.mb-small.mb-none-m MP3 na CD
              .badge.badge--green.mb-small.mb-none-m Na sklade
    .bar__item.bar__item--shrinkable.no-mrg-top.mb-none.no-mrg-horizontal--m-down
      .bar.bar--small.no-mrg.bar--no-wrap
        .bar__item.no-mrg
          .badge.badge--primary -20%
        .bar__item.no-mrg
          .text-bold.text-space-left 8,99
        .bar__item.no-mrg
          a.link.text-space-left-tiny
            +icon('arrow-right').icon--medium

block content
  main

    section.section--breadcrumbs
      .wrapper-main
        .bar.no-mrg-bottom
          .bar__item.bar__item--shrinkable
            +breadcrumbs({ breadcrumbs: ['Knihy', 'Deti a mládež', 'Encyklopédie, náučné knihy', 'Ostatné', 'Základy rybolovu pro kluky a holky'] })

    section.section
      .wrapper-main
        .row.product-detail
          .col--5.col--s-3.col--m-4.col--l-3
            .product-detail__preview
              .product-detail__image
                .thumbnail.thumbnail--book.thumbnail--large-shadow.thumbnail--huge.mb-medium.clickable(data-toggle="#product-preview")
                  .thumbnail__img-wrap
                    img.img.img--fluid.mb-medium(src=`${assetsPrefix}images/content/books/sample-14.jpg`, alt="Základy rybolovu pro kluky a holky - Frank Weissert, Jack Thorne a John Tiffany")
                  img.book-flag.book-flag--large(src="images/content/top100/10dni.png", style="position: absolute; right: 10px; top: -5px;")

                .product-detail__preview-link.text-left
                  .text-space-right
                  button.btn.btn--clean.mb-none(data-toggle="#product-preview")
                    +icon('eye').icon--left.icon--medium
                    span.show-m Pozrieť ukážku
                    span.hide-m ukážka
              .show-m
                .product-detail__preview-link.text-center
                  button.btn.btn--clean(data-toggle="self, #audio-preview" data-toggle-icon=`${assetsPrefix}icons_/app.svg#icon-pause` data-toggle-text="Zastaviť")
                    +icon('play').icon--left.icon--medium
                    span.show-m(data-toggle-text-target) Prehrať ukážku
                  audio#audio-preview(data-audioplayer)
                    source(type="audio/aac" src="http://techslides.com/demos/samples/sample.aac")
                    .alert.alert--error-light Váš prehliadač nepodporuje HTML5 audio prehrávač.

          article.col--7.col--s-9.col--m-8.col--l-6

            h1.product-detail__title.mb-small Základy rybolovu pro kluky a holky
            h3.h4.product-detail__subtitle.mb-small Praktický návod ako stretnúť, spoznať a získať ženu svojich snov
            ul.list-inline.list-inline--delimited.product-detail__author.mb-medium.mb-large-m
                li
                  a.link(href="#", data-tooltip, data-html="#author-tooltip", data-theme="light") Frank Weissert
                li
                  a.link(href="#", data-tooltip, data-html="#author-tooltip", data-theme="light") Jack Thorne
                li
                  a.link(href="#", data-tooltip, data-html="#author-tooltip", data-theme="light") John Tiffany
            .bar.bar--small.hide-m
              .bar__item.text-medium
                a.link(href="#") Inspira Publishing
                span.text-color-grey , 2016

            .bar.bar--small.mb-medium
              .bar__item
                .badges.no-mrg
                  .badge
                    .rating-star
                      +icon('star').rating-star__item.icon--medium.is-active
                      +icon('star').rating-star__item.icon--medium.is-active
                      +icon('star').rating-star__item.icon--medium.is-active
                      +icon('star-half').rating-star__item.icon--medium.is-active
                      +icon('star').rating-star__item.icon--medium
                      .rating-star__value
                        | 3,5
                    a.link.text-medium.text-space-left.show-m(href="#recenzie", data-scroll) 234x
              .bar__item.bar__item--shrinkable.show-m
                .badges.no-mrg
                  .badge.badge--green Bestseller
                  .badge.badge--orange Top #98
              .bar__item.bar__item--shrinkable
                .text-medium
                  +icon('coffee').icon--medium.text-space-right-tiny.text-color-grey
                  em(data-tooltip, title="Lorem ipsum dolor sit amet").text-color-grey 3 hodiny čítania

            .bar.mb-medium.show-m
              .bar__item
                dl.no-mrg
                  dt Vydavateľstvo
                  dd
                    a.link(href="#") Inspira Publishing
                    span.text-color-grey , 2016
              .bar__item.bar__item--border
              .bar__item
                dl.no-mrg
                  dt Edícia
                  dd
                    a.link(href="#") Rybolov
              .bar__item.bar__item--border
              .bar__item.bar__item--fill
                .bar.bar--small.align-items-top.no-mrg-bottom
                  .bar__item
                    .portrait.portrait--small(style="background-image: url('https://www.martinus.sk/data/autori/img/a1666.jpg');")
                  .bar__item.bar__item--fill
                    dl.no-mrg
                      dt Tento titul číta aj
                      dd
                        a.link(href="#") Jana Šlinská

            //p.text-medium.hide-m Těžko se najde něco napínavějšího než rybolov. Jako mladí sportovní rybáři se z této knihy...

            //p.show-m
              | Těžko se najde něco napínavějšího než rybolov. Jako mladí sportovní rybáři se z této knihy dozvíte, jak na to, aby dobrodružství jménem rybolov vám od začátku dělalo opravdovou radost. Vysvětlíme vám, jaké...#{' '}
              a.link(href="#popis-knihy", data-scroll, data-scroll-offset=`{"0": ${header.size.default + 70}, "768": ${header.size.m + 20}}`) čítaj viac#{' '}
                +icon('arrow-down')

            +itemGroup(1).show-m


          .col--l-3.col--m-6.ofst--m-4.ofst--l-0

            +itemGroup(2).hide-m

            include ./modules/card-cart

            .social-buttons.text-center.mb-medium.mb-none-l
              | <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-width="100" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
              | <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


    section.section.section--secondary.section--overflow
      .wrapper-main
        +sectionHeader({ header: 'Odporúčané knihy a kolekcie', more: false })

        +booksCarouselRecommended.carousel--fade-outside

block append scripts
    script.
      document.addEventListener('myAppLoaded', function() {

        /*var myAlert = new window.myApp.Alert({
          icon: 'check-circle',
          text: 'Upokoj sa, všetko ide podľa plánu. <a class="link" href="#">Viac informácií nájdete tu</a>.'
        });*/

        var productPreviewProductSelect = new window.myApp.Select('#product-preview-product-select', {
          choices: [
            {
              value: 'pevna-vazba',
              label: 'Pevná väzba',
              id: 1,
              customProperties: {
                price: '11,50 €',
                delivery: 'posielame ihneď',
              }
            },
            {
              value: 'e-book',
              label: 'E-book',
              id: 2,
              customProperties: {
                price: '9,50 €',
                delivery: 'posielame ihneď',
              }
            },
          ]
        });

        var dataStoreList = {
          "choices": [{
              "value": 24,
              "label": "Bansk\u00e1 Bystrica",
              "id": 24,
              "selected": false,
              "customProperties": {"status": "success"}
          }, {
              "value": 10,
              "label": "Bratislava (Cubicon)",
              "id": 10,
              "selected": false,
              "customProperties": {"status": "success"}
          }, {
              "value": 7,
              "label": "Bratislava (Obchodn\u00e1)",
              "id": 7,
              "selected": true,
              "customProperties": {"status": "success"}
          }, {
              "value": 12,
              "label": "Ko\u0161ice (OC Gal\u00e9ria)",
              "id": 12,
              "selected": false,
              "customProperties": {"status": "orange"}
          }, {
              "value": 22,
              "label": "Lu\u010denec (OC Gal\u00e9ria)",
              "id": 22,
              "selected": false,
              "customProperties": {"status": "orange"}
          }, {
              "value": 1,
              "label": "Martin",
              "id": 1,
              "selected": false,
              "customProperties": {"status": "orange"}
          }, {
              "value": 4,
              "label": "Nitra (OC Centro)",
              "id": 4,
              "selected": false,
              "customProperties": {"status": "orange"}
          }, {
              "value": 18,
              "label": "Poprad (OC F\u00f3rum)",
              "id": 18,
              "selected": false,
              "customProperties": {"status": "success"}
          }, {
              "value": 19,
              "label": "Pova\u017esk\u00e1 Bystrica",
              "id": 19,
              "selected": false,
              "customProperties": {"status": "orange"}
          }, {
              "value": 5,
              "label": "\u017dilina (SC Mirage)",
              "id": 5,
              "selected": false,
              "customProperties": {"status": "orange"}
          }]
        };

        var storeListSelect = new window.myApp.Select('.store-list-select', dataStoreList);
        storeListSelect.elements[0].setValueByChoice('ba-cubicon');
      });

      document.addEventListener('myAppInit', function() {
        var productPreview;

        window.addEventListener('modalOpen', function() {
          productPreview = new window.myApp.ProductPreview();
        });

        window.addEventListener('resize', function() {
          if (productPreview) {
            productPreview.update();
          }
        });
      });

block modals
  .modal-overlay#modal-formats(data-modal)
    .modal.modal--medium
      .modal__wrap
        .modal__header.mb-none
          .modal__header__action
            .thumbnail.thumbnail--book.thumbnail--medium.mb-none
              .thumbnail__img-wrap
                img.img.img--fluid.mb-medium(src=`${assetsPrefix}images/content/books/sample-14.jpg`, alt="Základy rybolovu pro kluky a holky - Frank Weissert, Jack Thorne a John Tiffany")
          .modal__header__headline.text-center
            .h2.h3 Všetky formáty titulu
          .modal__header__action
            .btn.btn--clean(data-toggle="#modal-formats")
              +icon('close').icon--medium

        .modal__content
          +groupItem('Kniha, ', 0, 'pevná väzba, vydavatelstvo Publishing, 2019')
          +groupItem('Kniha', 0, 'brožovaná väzba, vydavatelstvo Publishing, 2019')
          +groupItem('E-kniha', 1, 'vydavatelstvo Publishing, 2019')
          +groupItem('Audiokniha mp3', 2, 'vydavatelstvo Publishing, 2019')
          +groupItem('Audiokniha cd', 3, 'vydavatelstvo Publishing, 2019')
