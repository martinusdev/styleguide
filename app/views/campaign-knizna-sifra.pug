extends layouts/_default

include ./mixins/breadcrumbs
include ./mixins/icon

block append head
  link(rel="stylesheet", href=`https://unpkg.com/leaflet@1.3.4/dist/leaflet.css`, integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==", crossorigin="")

block opts
    - var pageTitle = 'Knižná šifra'
    - var campaignHeader = true
    - var pageClass = 'ks-page'

block content
  main

    section.section.ks-header.text-color-white
      .wrapper-main
        .row.align-items-top.mb-none
          .col--m-3.mb-medium.text-center
            a(href="#")
              img(src="images/content/campaign/knizna-sifra4/logo/sk.svg", width="270")
          .col--m-5.col--l-6.mb-medium.mb-none-m
            h1.h2.mb-medium Hľadaj knihy ukryté v obraze
            .show-m
              p.mb-none
                ul.list--counter.no-pad.ks-list
                  li.mb-small
                    b Počas marca#{' '}
                    | sa bude obraz postupne odkrývať.
                    br
                    | Ak si chceš pomôcť, skoč sa pozrieť na celý obraz.
                  li.mb-small Keď ťa vyžrebujeme, za každý uhádnutý názov získavaš knižku. Ak počas marca urobíš v Martinuse ľubovoľný nákup, tvoju výhru zdvojnásobíme
                  li.mb-small Za každú knižku zakúpenú na www.martinus.sk počas marca získaš pomôcku k niektorej časti obrazu.
                    a(href="#", data-toggle="#rules").link.ks-link--inverse #{' '}kompletné pravidlá.
            .hide-m
              .mb-none#ks-description(data-collapse="70")
                ul.list--counter.no-pad.ks-list
                  li.mb-small Počas marca sa bude obraz postupne odkrývať. Ak si chceš pomôcť, skoč sa pozrieť na celý obraz.
                  li.mb-small Keď ťa vyžrebujeme, za každý uhádnutý názov získavaš knižku. Ak počas marca urobíš v Martinuse ľubovoľný nákup, tvoju výhru zdvojnásobíme
                  li.mb-small Za každú knižku zakúpenú na www.martinus.sk počas marca získaš pomôcku k niektorej časti obrazu.
                    a(href="#", data-toggle="#rules").link.ks-link--inverse #{' '}kompletné pravidlá.
              a.link.ks-link--inverse.text-size-medium(href="javascript:void(0)", data-toggle="#ks-description, self", data-toggle-icon="icons_/app.svg#icon-arrow-up", data-toggle-text="Čítaj menej", data-collapse-trigger) <span data-toggle-text-target>Čítaj viac</span>#{' '}
                +icon('arrow-down')
          .col--m-4.col--l-3.mb-none-m

            .text-center.text-right-m
              .btn.btn--primary.btn--medium.mb-small(data-toggle="#login")
                +icon('user').icon--small.icon--left
                | Prihlásiť sa
              .btn.btn--ghost-inverse.btn--medium.mb-small
                +icon('facebook').icon--small.icon--left
                | Prihlásiť sa na facebooku

            .ks-user
              .bar.bar--vertical
                .bar__item.border-bottom-grey.ks-border--inverse
                  .bar
                    .bar__item.bar__item--shrinkable.text-ellipsis.ko-user__email.no-mrg-bottom
                      +icon('user').icon--medium.text-space-right
                      span.text-semibold klco.roman@gmail.com
                    .bar__item.bar__item--fill.text-right.no-mrg-bottom
                      a(href="#").link.link--product
                        +icon('logout').icon--medium
                .bar__item.text-center.text-left-m
                  | Môžeš vyhrať:#{' '}
                  b.text-bold.ks-text-color-inverse.h2 12
                  b #{' '}zo 128 kníh
                  .mb-small
                    .ks-progress
                      - var i = 0;
                      while i < 12
                        .ks-progress__item.ks-progress__item--active
                        - i++;
                      while i > 11 && i < 64
                        .ks-progress__item
                        - i++;
                  .text-small
                    a.link.ks-link--inverse Zdvojnásob svoju výhru nákupom v Martinus.sk!

    section.section
      .wrapper-main
        #image-map.ks-map

    section.section
      .wrapper-main
        .row
          .col--m-8.ofst--m-2
            .card.card--well.mb-large
              .card__content
                h2.mb-none Aké knihy sa ti podarilo nájsť?
                p.text-color-grey Zadaj postupne všetky knihy, ktoré si našiel ukryté v obraze.
                .bar
                  .bar__item.bar__item--fill.no-mrg--m-down
                    .form-control.form-control--input
                      .input-addons.input-addons--large
                        .input-addons__item.show-m
                          +icon('search').icon--medium
                        input.input.input--large(type="text", placeholder="Napr. Malý princ")
                        .input-addons__item.no-pad.hide-m
                          button.btn.btn--primary.btn--large.btn--equal
                            +icon('search').icon--medium.icon--left
                  .bar__item.bar__item--shrinkable.show-m
                    button.btn.btn--primary.btn--large Hľadať
                .bar.mb-none
                  .bar__item.bar__item--fill.no-mrg--m-down
                    .alert.alert--error-light
                      | Mrzí nás to, ale túto knihu do obrazu maliar nezašifroval :-(
                  .bar__break.hide-m
                  .bar__item.bar__item--shrinkable
                    a.btn.btn--clean.btn--small
                      | späť
                      span.show-m #{' '}na obraz
                      +icon('arrow-up').icon--small
                  .bar__item.bar__item--shrinkable
                    a.btn.btn--clean.btn--small
                      | nájdené knihy#{' '}
                      +icon('arrow-down').icon--small

            p.mb-large.text-center
              b Nezabudni#{' '}
              | – Šifra je najväčšia zábava, keď sa máš komu pochváliť úspechmi :-) Zdieľaj na:
              a(href="#")
                +icon('facebook').icon--medium
              a(href="#")
                +icon('instagram').icon--medium

    section.section.section--secondary
      .wrapper-main
        h2 Úspešne odšifrované knihy#{' '}
          | 2 / 64

        .row.mb-large

          .col--m-2.col--6.flex
            article.card.card--material.card--material-green.no-pad-top
              a(href="#")
                img(src="images/content/campaign/knizna-sifra4/img-card.jpg", width="100%")
              .bar.bar--vertical.mb-none
                .bar__item.bar__item--fill.no-mrg
                  .card__content.line-small.no-pad-bottom
                    a.link.link--product.text-medium Steve Jobs
                    .text-color-grey.text-small.mb-small Walter Isaacson
                .bar__item.bar__item--shrinkable.no-mrg
                  .card__content.line-small
                    a(href="#").btn.btn--small.btn--ghost.block.mb-none viac info

          .col--m-2.col--6.flex
            article.card.card--material.card--material-green.no-pad-top
              a(href="#")
                img(src="images/content/campaign/knizna-sifra4/img-card.jpg", width="100%")
              .bar.bar--vertical.mb-none
                .bar__item.bar__item--fill.no-mrg
                  .card__content.line-small.no-pad-bottom
                    a.link.link--product.text-medium Velmi dlhy nazov knihy na dva alebo tri riadky
                    .text-color-grey.text-small.mb-small Walter Isaacson
                .bar__item.bar__item--shrinkable.no-mrg
                  .card__content.line-small
                    a(href="#").btn.btn--small.btn--ghost.block.mb-none viac info

          each item, i in [1,2,3,4]
            .col--m-2.col--4.flex
              article.card.block(style="width: 100%;")

  .modal-overlay#login(data-modal)
    article.modal
      .modal__wrap
        .modal__header
          .modal__header__headline
            h2 Prihlásenie
          .modal__header__action
            .btn.btn--clean(data-toggle="#login")
              +icon('close').icon--medium
        .modal__content
          form
            .form-control.form-control--input
              .input-addons
                input.input(type="text", placeholder="Tvoj e-mail...")
                .input-addons__item.no-pad
                  button.btn.btn--primary
                    | Prihlásiť

  .modal-overlay#bonus(data-modal)
    article.modal.modal--medium
      .modal__wrap
        .modal__header.mb-none
          .modal__header__headline.text-center
            .h5 bonusová otázka na dnešný deň
            .h2.text-transform-upper Nadpis
          .modal__header__action
            .btn.btn--clean(data-toggle="#challenge")
              +icon('close').icon--medium
        .row.ko-video-background
          .ofst--m-1
          .col--m-10
            .ko-video
              | <iframe width="560" height="315" src="https://www.youtube.com/embed/docIm4sExSk?rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        .modal__content
          .mb-medium
          .row
            .ofst--m-1
            .col--m-10
              h3.h2 Zadaj odpoveď
              form.mb-large
                .form-control.form-control--input#input-guess
                  .input-addons
                    input.input(type="text", placeholder="Text odpovede...")
                    .input-addons__item.no-pad
                      .btn.btn--primary#btn-guess
                        | Hľadaj

              .card.card--success
                .card__content
                  .bar.mb-none
                    .bar__item
                      +icon('check-circle').icon--large.text-color-success
                    .bar__item.bar__item--fill.text-color-success
                      | Gratulujeme! Získavaš naviac 2 knihy, ktoré bla bla...
                    .bar__item.bar__item--shrinkable
                      button.btn.btn--small.btn--clean ďalej
                        +icon('arrow-right')

block append scripts
  script(src=`https://unpkg.com/leaflet@1.3.4/dist/leaflet.js`, integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==", crossorigin="")
  script
    .
      var map = L.map('image-map', {
        minZoom: 1,
        maxZoom: 4,
        center: [0, 0],
        zoom: 1,
        crs: L.CRS.Simple,
        scrollWheelZoom: false
      });

      var w = 2562,
          h = 2562,
          url = 'http://www.martinus.sk/kniznasifra/index.php?getimage';

      var southWest = map.unproject([0, h], map.getMaxZoom()-1);
      var northEast = map.unproject([w, 0], map.getMaxZoom()-1);
      var bounds = new L.LatLngBounds(southWest, northEast);

      L.imageOverlay(url, bounds).addTo(map);

      map.setMaxBounds(bounds);