extends campaign-2024

block authSection
  .d-flex.align-items-center.justify-content-center
    +faIcon('user-circle').fa-lg.mr-small.mb-none
    .h5-user__email.text-ellipsis superdlhy.sherlock.holmes@martinus.sk
    +faIcon('arrow-right-from-bracket').ml-small.fa-lg

block gameStats
  .campaign-progress
    .campaign-progress__books
      +faIcon('book').fa-lg.mr-small
      | Hráš o&nbsp;<strong class="font-weight-bold">4</strong>&nbsp;z 20 kníh
    .progress-bar.progress-bar--small.progress-bar--primary
      div.progress-bar__value(style="width: 20%")
    .campaign-progress__info.text-medium.bg-white(data-tooltip, data-html="#mc24-double-price-tooltip", data-tippy-theme="light")
      | Zdvojnásob svoju výhru
      +faIcon('info-circle').ml-tiny
  #mc24-double-price-tooltip.hide.card
    .card__content.text-center.p-tiny
      p.text-size-medium Stačí, ak do 31. marca urobíš ľubovoľný nákup v kníhkupectve Martinus alebo na www.martinus.sk a tvoju prípadnú výhru zdvojnásobime.
      ul.list-inline
        li
          a(href="campaign-2024-pravidla.html").link Pravidlá súťaže
        li
          a(href="https://www.martinus.sk").link Na Martinus

block gameContent
  .wrapper-main.mc24-board
    .row
      for i in [1,2,3,4]
        for j in [1,2,3,4,5]
          - const randomCover = Math.floor(Math.random() * 6) + 1;
          .col--6.col--l-3
            .mc24-board__tile(class=(i === 1 && j === 1) ? 'is-done': '')
              if i === 1
                a(href='#', data-bs-toggle="modal" data-bs-target="#mc24-modal-game")
                  img(src='images/content/campaign/knizne-putovanie/card-sample.png').img-fluid
              else
                img(src=`images/content/campaign/knizne-putovanie/envelopes/${randomCover}.jpg`).img-fluid.img--rounded
              .mc24-board__tile__date
                | 28. 3.
  block gameModal
    .modal.modal-lg.fade#mc24-modal-game(aria-labelledby="game-modal-title" aria-hidden="true" tabindex="-1" role="dialog")
      .modal-dialog
        .modal-content
          .modal-body.px-l-large
            h2.text-center#game-modal-title Ktorá knižná postava poslala Červenej Čiapočke túto pohľadnicu?

            .row.mb-medium
              .col--m-8.mx-auto
                .form-control.form-control--input.mb-none
                  .input-addons
                    input.input(type="text", placeholder="Sem napíš svoju odpoveď…")
                    .input-addons__item.p-none
                      a(href='campaign-2024-answer.html').btn.btn--primary.px-small Hádať

            .mc24-game__tab-nav
              h5.text-center.mb-none Indície:
              ul.tab-nav.mx-auto.d-flex.align-items-center.justify-content-center(data-tabs-container)
                li.tab-nav__item.is-active(data-tabs-item)
                  a.tab-nav__content.tab-nav__content--link(href='#game-tab-1', role="tab", title="Vizuálna indícia", style="background-image: url('images/content/campaign/knizne-putovanie/card-sample.png')")
                li.tab-nav__item(data-tabs-item)
                  a.tab-nav__content.tab-text.tab-nav__content--link(href='#game-tab-2', role="tab", title="Text na zadnej strane pohľadnice", style="background-image: url('images/content/campaign/knizne-putovanie/paper/history.jpg')")
                    img(src='images/content/campaign/knizne-putovanie/ciapocka.png').mt-tiny
                    | 12:00
                li.tab-nav__item(data-tabs-item)
                  a.tab-nav__content.tab-nav__content--link(href='#game-tab-3', role="tab", title="Rozhovor s náhodou osobou")
                    img(src='images/content/campaign/knizne-putovanie/ciapocka.png').mt-tiny
                    | 16:00
                li.tab-nav__item.is-disabled(data-tabs-item)
                  .tab-nav__content.tab-nav__content--link(data-tooltip, title="Túto indíciu odomkneme o 16:00")
                    img(src='images/content/campaign/knizne-putovanie/ciapocka.png').mt-tiny
                    | 16:00

            article.py-medium.px-l-large.mc24-game__hint.text-center.tabs
              section#game-tab-1.tab
                img(src='images/content/campaign/knizne-putovanie/card-sample-lg.png').img-fluid.shadow-md
              section#game-tab-2.tab
                .card.mc25-paper.mc25-paper--diary.shadow-md
                  .card__content
                    p Moja budúca dôverná priateľka, Červená Čiapočka,<br>hoci červená nie je moja najobľúbenejšia farba, rada ťa privítam na našom krásnom ostrove plnom vždyzelených lúk. Môžeš mi pomôcť s prípravou na učiteľské skúšky, tvoja babička mi hovorila, že si veľmi bystré dievča. Ach, kde som to len dala svoj klobúk?
              section#game-tab-3.tab
                .card.card--well.mc24-game__talk.shadow-md
                  .card__content
                    h2 Rozhovor s náhodnou osobou
                    p Červená čiapočka na poľnej ceste zastaví neznámeho farmára v slamenom klobúku. Ukáže mu záhadnú pohľadnicu.

                    .card.card--speech-bubble
                      .card__content
                        <strong>ČČ:</strong><br>
                        | Prosím vás, milý pane, hľadám odosielateľa alebo odosielateľku tejto pohľadnice. Viete mi pomôcť?

                    .card.card--speech-bubble-end.bg-secondary
                      .card__content
                        <strong>Farmár:</strong><br>
                        | Akoby nie! Dom tejto osoby už zďaleka ľahko rozoznáš podľa farby strechy.

                    .card.card--speech-bubble
                      .card__content
                        <strong>ČČ:</strong><br>
                        | Čo mi o nej ešte viete povedať?

                    .card.card--speech-bubble-end.bg-secondary
                      .card__content
                        <strong>Farmár:</strong><br>
                        | Zhovorčivá osôbka s veľkou predstavivosťou. A máme podobné klobúky! Dovidenia, utekám podojiť kravy!

              img(src='images/content/campaign/knizne-putovanie/hero-guess.png').mc24-game__hint__hero.mt-medium


  script.
    document.addEventListener('DOMContentLoaded', function() {
      var cards = document.querySelectorAll('.mc24-board__tile');
      cards.forEach(function(card) {
        var rotate = (Math.random() * 6 - 3).toFixed(2) + 'deg'; // random rotation between -3 and 3 degrees
        var scale = (Math.random() * 0.1 + 1).toFixed(2); // random scale between 1 and 1.1
        var translateX = (Math.random() * 6 - 3).toFixed(2) + 'px'; // random translationX between -3px and 3px
        var translateY = (Math.random() * 6 - 3).toFixed(2) + 'px'; // random translationY between -3px and 3px

        card.style.setProperty('--rotate', rotate);
        card.style.setProperty('--scale', scale);
        card.style.setProperty('--translateX', translateX);
        card.style.setProperty('--translateY', translateY);
      });
    });

    const mc24Paper = document.querySelector('.mc24-paper');
    const mc24PaperClasses = ['mc24-paper--fantasy-scifi', 'mc24-paper--modern', 'mc24-paper--history', 'mc24-paper--funky'];

    document.querySelectorAll('.change-paper').forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        mc24PaperClasses.forEach(function(className) {
          mc24Paper.classList.remove(className);
        });
        mc24Paper.classList.add('mc24-paper--' + this.dataset.paper);
      });
    });


