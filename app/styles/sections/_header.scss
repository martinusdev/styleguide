.header {
  position: relative;

  &__wrapper {
    position: relative;
    background-color: $color-black;
    padding-top: _get-space('v');
    padding-bottom: _get-space('v');
    z-index: $z-index-topbar;

    &::after {
      content: '';
      background-image: svg-load('./../images/content/rainbow-header.svg');

      height: 5px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: $z-index-topbar;
    }
  }

  .wrapper-main {
    @include breakpoint(m, 'down') {
      padding-left: _get-space('h', 'small');
      padding-right: _get-space('h', 'small');
    }
  }

  &__bar {
    margin-bottom: 0;

    @include breakpoint(m, 'down') {
      justify-content: space-between;

      .bar__item { // stylelint-disable-line max-nesting-depth
        margin-right: _map-deep-get($bar-spacing, small, default);
      }
    }
  }

  &__btn {
    padding-top: _get-rem(9px);
    padding-bottom: _get-rem(9px);

    color: _color(grey, 400);

    text-transform: none;

    font-size: $default-font-size;

    &.btn--small.btn--equal {
      padding: 0;
    }

    &:hover,
    &:focus,
    &.is-active {
      color: $color-white;
    }

    @include breakpoint('l') {
      &.is-active {
        position: relative;
        overflow: visible;
        z-index: $z-index-topbar + 1;

        &::before { // stylelint-disable-line
          content: '';
          width: 0;
          height: 0;

          position: absolute;
          bottom: -21px;
          left: 50%;
          margin-left: -8px;

          border-left: 8px solid transparent;
          border-right: 8px solid transparent;
          border-bottom: 8px solid $color-white;
        }
      }
    }
  }

  &__search {
    width: 100%;

    .input {
      // stylelint-disable max-nesting-depth
      &:not(.is-value) {
        ~ .header-search__value { display: none; }
      }

      &.is-value {
        ~ .header-search__empty { display: none; }
      }
      // stylelint-enable max-nesting-depth
    }
  }

  &__user {
    color: _color(grey, 400);
    font-size: _get-rem($font-size-medium);
    font-weight: $font-weight-semibold;

    align-items: center;

    @include breakpoint(m, 'down') {
      .bar__item:first-child {
        margin-right: 0;
      }
    }
  }

  &__username {
    max-width: _get-rem(110px);
  }

  &__cart,
  &__nav-burger .btn {
    color: _color(grey, 400);
  }

  .dropdown {
    z-index: $z-index-topbar + 1;
  }

  @include breakpoint(m, 'down') {
    &__user { order: 1; }
    &__cart { order: 2; }

    &__search {
      order: 3;
      flex: 0;
    }

    &__nav { order: 4; }
  }
}

.header-search {
  display: flex;
  justify-content: flex-end;

  &__value {
    border-left: 0;
    border-right: 0;
    border-radius: $default-border-radius;
  }

  &__empty {
    border-top-right-radius: $form-b-r;
    border-bottom-right-radius: $form-b-r;

    background-color: _color(grey, 900);
    border-color: _color(grey, 900);

    transition: $form-t;
  }
}
