// ---------------------------------------------
// Carousel
// ---------------------------------------------

.carousel {
  margin-bottom: _get-space('v', 'large');

  .swiper-slide:not(.swiper-slide-visible) {
    pointer-events: none;
  }

  .swiper-wrapper { align-items: flex-end; }

  &__btn {
    position: absolute;
    z-index: 3 !important;
    top: _map-deep-get($carousel, btns, offsetV);
    transform: translateY(-(_map-deep-get($carousel, btns, offsetV)));
    margin: 0;

    &--prev {
      left: _map-deep-get($carousel, btns, offsetH, default);
    }

    &--next {
      right: _map-deep-get($carousel, btns, offsetH, default);
    }

    @include breakpoint(l) {
      &--prev {
        left: _map-deep-get($carousel, btns, offsetH, l);
      }

      &--next {
        right: _map-deep-get($carousel, btns, offsetH, l);
      }
    };

    &.is-disabled {
      opacity: 0;
    }
  }

  &__link {
    display: block;
  }

  &--fade-outside {
    position: relative;
    overflow: visible;

    margin-left: -(_map-deep-get($carousel, fade, size));
    margin-right: -(_map-deep-get($carousel, fade, size));
    padding: 0 _map-deep-get($carousel, fade, size);

    .swiper-container { overflow: visible; }

    .swiper-container {
      margin: 0;

      // stylelint-disable-next-line
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;

        width: _map-deep-get($carousel, fade, size);
        z-index: 2;
        pointer-events: none;
      }

      &::after { // stylelint-disable-line
        right: -(_map-deep-get($carousel, fade, size));
        left: auto;

        background: linear-gradient(to right, (_map-deep-get($carousel, fade, gradient)));
      }

      &::before { // stylelint-disable-line
        left: -(_map-deep-get($carousel, fade, size));
        right: auto;

        background: linear-gradient(to left, (_map-deep-get($carousel, fade, gradient)));
      }
    }

    &-white {
      .swiper-container { // stylelint-disable-line
        &::before { // stylelint-disable-line
          background: linear-gradient(to left, (_map-deep-get($carousel, fade, gradient-white)));
        }
        &::after { // stylelint-disable-line
          background: linear-gradient(to right, (_map-deep-get($carousel, fade, gradient-white)));
        }
      }
    }
  }

  &--fade-inactive {
    .swiper-slide { opacity: 0.5; }
    .swiper-slide-active { opacity: 1; }

    .carousel__btn--next { right: 40px; }
    .carousel__btn--prev { left: 40px; }
  }

  &--disable-inactive {
    .swiper-slide:not(.swiper-slide-active) .carousel__link { // stylelint-disable
      pointer-events: none;
    }
  }

  &__book-detail {
    width: 120px;
  }

  &__book {
    width: 100px;
  }

  &__banner {
    width: 300px;

    @include breakpoint(m) {
      width: 600px;
    }
  }

  // stylelint-disable max-nesting-depth
  &--fan {
    .swiper-container { overflow: visible; }

    .swiper-slide {
      opacity: 0;

      .figure-book__rating {
        position: relative;
        margin-top: -10px;
        opacity: 0;
      }
    }

    .swiper-slide-visible {
      opacity: 0.2;
      transform: rotate(-20deg) scale(0.6) translate3d(150px, 60px, 0);
      z-index: 2;

      &.swiper-slide-prev,
      &.swiper-slide-next {
        opacity: 0.5;
        transform: rotate(-10deg) scale(0.8) translate3d(50px, 0, 0);
        z-index: 3;
      }

      &.swiper-slide-active {
        opacity: 1;
        transform: rotate(0deg) scale(1) translate3d(0, 0, 0);
        z-index: 4;

        .figure-book__rating {
          opacity: 1;
          z-index: 5;
        }

        ~ .swiper-slide-visible {
          transform: rotate(20deg) scale(0.6) translate3d(-150px, 60px, 0);
        }

        + .swiper-slide-next {
          transform: rotate(10deg) scale(0.8) translate3d(-50px, 0, 0);
        }
      }
    }
  }
  // stylelint-enable max-nesting-depth
}
